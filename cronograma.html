<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>11Âª ConferÃªncia Municipal de SaÃºde â€“ Cronograma Geral</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-50 text-slate-800">

  <header class="bg-emerald-700 text-white py-8 shadow">
    <div class="max-w-7xl mx-auto px-6">
      <h1 class="text-3xl font-bold">11Âª ConferÃªncia Municipal de SaÃºde de Montes Claros â€“ MG</h1>
      <p class="mt-2 text-lg">Cronograma, checklist e execuÃ§Ã£o institucional</p>
      <p class="mt-1 text-sm opacity-90">PrÃ©-conferÃªncias: 10 a 27 de marÃ§o de 2026 Â· ConferÃªncia: 22, 23 e 24 de abril de 2026</p>
    </div>
  </header>

  <main class="max-w-7xl mx-auto px-6 py-10">
    <section class="mb-10">
      <h2 class="text-2xl font-semibold mb-4">ðŸ“‹ Cronograma Geral por Fases</h2>
      <p class="text-slate-600">Os dados abaixo sÃ£o atualizados automaticamente a partir da planilha oficial de acompanhamento.</p>
    </section>

    <div id="cronograma" class="space-y-10"></div>
  </main>

  <footer class="bg-slate-200 text-slate-700 py-6 mt-10">
    <div class="max-w-7xl mx-auto px-6 text-sm">
      Conselho Municipal de SaÃºde de Montes Claros Â· Secretaria Executiva Â· 2026
    </div>
  </footer>

<script>
const CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vT-5x076YH0t-mm6JMJ0xRVys9MSgYmx__uofTX8JsbOxFH9LVUriyTMy-oUgiBN8D8hxC1MumyxccZ/pub?output=csv";

function parseCSV(text) {
  const lines = text.split("\n").filter(l => l.trim() !== "");
  const headers = lines[0].split(",").map(h => h.trim());
  return lines.slice(1).map(line => {
    const values = line.split(",");
    const obj = {};
    headers.forEach((h, i) => obj[h] = values[i] || "");
    return obj;
  });
}

fetch(CSV_URL)
  .then(res => res.text())
  .then(csv => {
    const data = parseCSV(csv);
    const container = document.getElementById("cronograma");

    const fases = {};

    data.forEach(item => {
      const fase = item["FASE"] || "Outros";
      if (!fases[fase]) fases[fase] = [];
      fases[fase].push(item);
    });

    Object.keys(fases).forEach(fase => {
      const section = document.createElement("section");
      section.className = "bg-white rounded-xl shadow border border-slate-200";

      const header = document.createElement("div");
      header.className = "px-6 py-4 border-b bg-slate-100 rounded-t-xl";
      header.innerHTML = `<h3 class="text-xl font-bold">${fase}</h3>`;

      const table = document.createElement("table");
      table.className = "w-full text-sm";
      table.innerHTML = `
        <thead class="bg-slate-50 text-slate-600">
          <tr>
            <th class="text-left px-4 py-2">NÂº</th>
            <th class="text-left px-4 py-2">Etapa / AÃ§Ã£o</th>
            <th class="text-left px-4 py-2">Data Prevista</th>
          </tr>
        </thead>
        <tbody></tbody>
      `;

      const tbody = table.querySelector("tbody");

      fases[fase].forEach(item => {
        const tr = document.createElement("tr");
        tr.className = "border-t hover:bg-emerald-50 transition";
        tr.innerHTML = `
          <td class="px-4 py-2 font-medium">${item["NÂº"] || ""}</td>
          <td class="px-4 py-2">${item["Etapa / AÃ§Ã£o"] || ""}</td>
          <td class="px-4 py-2">${item["Data Prevista"] || ""}</td>
        `;
        tbody.appendChild(tr);
      });

      section.appendChild(header);
      section.appendChild(table);
      container.appendChild(section);
    });
  });
</script>

</body>
</html>
