<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>11Âª ConferÃªncia Municipal de SaÃºde de Montes Claros â€“ PrÃ©-ConferÃªncias</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 text-gray-900">

  <!-- CabeÃ§alho -->
  <header class="bg-gradient-to-r from-green-700 via-blue-700 to-green-800 text-white py-10 shadow">
    <div class="max-w-7xl mx-auto px-6">
      <h1 class="text-3xl md:text-4xl font-bold mb-2">11Âª ConferÃªncia Municipal de SaÃºde de Montes Claros â€“ MG</h1>
      <p class="text-lg md:text-xl font-light">Cronograma das PrÃ©-ConferÃªncias | Brasil das Brasileiras e dos Brasileiros: SUS e Soberania</p>
      <p class="mt-2 italic">Cuidar do Povo Ã© Cuidar do Brasil!</p>
    </div>
  </header>

  <!-- ConteÃºdo -->
  <main class="max-w-7xl mx-auto px-6 py-10">
    <section class="mb-10">
      <h2 class="text-2xl font-semibold mb-4">ğŸ“… Cronograma (estilo Gantt)</h2>
      <p class="text-gray-600 mb-6">Os dados abaixo sÃ£o atualizados automaticamente conforme a planilha oficial das PrÃ©-ConferÃªncias.</p>

      <!-- Gantt -->
      <div id="gantt" class="space-y-4"></div>
    </section>
  </main>

  <!-- RodapÃ© -->
  <footer class="bg-gray-900 text-gray-300 py-6">
    <div class="max-w-7xl mx-auto px-6 text-sm text-center">
      Conselho Municipal de SaÃºde de Montes Claros â€¢ 11Âª ConferÃªncia Municipal de SaÃºde
    </div>
  </footer>

  <!-- Script -->
  <script>
    const csvUrl = "https://docs.google.com/spreadsheets/d/e/2PACX-1vT1QYVGTBNucVjwiDIazr3cKailQZ0hmR8hclCwURvwM2zCsIrwJHPjliAfofXp2TUSY4G-MH5BS8zO/pub?gid=1331650730&single=true&output=csv";

    function parseCSV(text) {
      const lines = text.trim().split("\n");
      const headers = lines.shift().split(",").map(h => h.trim());
      return lines.map(line => {
        const values = line.split(",");
        const obj = {};
        headers.forEach((h, i) => obj[h] = values[i]?.replace(/"/g, '').trim());
        return obj;
      });
    }

    function formatDate(dateStr) {
      const [year, month, day] = dateStr.split("-");
      return `${day}/${month}/${year}`;
    }

    fetch(csvUrl)
      .then(res => res.text())
      .then(csv => {
        const data = parseCSV(csv);
        const gantt = document.getElementById("gantt");

        data.forEach(item => {
          const card = document.createElement("div");
          card.className = "bg-white rounded-xl shadow-md p-6 border-l-8 border-green-600";

          card.innerHTML = `
            <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
              <div>
                <h3 class="text-xl font-semibold text-green-800 mb-1">${item['TEMA']}</h3>
                <p class="text-gray-700"><strong>ğŸ“ Local:</strong> ${item['LOCAL']}</p>
                <p class="text-gray-700"><strong>ğŸ•’ HorÃ¡rio:</strong> ${item['HORA']}</p>
              </div>
              <div class="text-right">
                <p class="text-lg font-bold text-blue-700">${formatDate(item['DATA'])}</p>
                <a href="${item['LINK PARA LISTA DE PRESENÃ‡A']}" target="_blank" class="inline-block mt-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition">
                  Lista de PresenÃ§a
                </a>
              </div>
            </div>

            <div class="mt-4">
              <div class="h-3 bg-gray-200 rounded-full overflow-hidden">
                <div class="h-3 bg-gradient-to-r from-green-500 to-blue-500 w-full"></div>
              </div>
              <p class="text-xs text-gray-500 mt-1">Evento Ãºnico â€“ visualizaÃ§Ã£o em linha do tempo</p>
            </div>
          `;

          gantt.appendChild(card);
        });
      })
      .catch(err => {
        document.getElementById("gantt").innerHTML = "<p class='text-red-600'>Erro ao carregar os dados da planilha.</p>";
        console.error(err);
      });
  </script>

</body>
</html>
